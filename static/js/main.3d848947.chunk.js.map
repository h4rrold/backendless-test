{"version":3,"sources":["components/display/Display.js","components/display/index.js","components/button/Button.js","components/button/index.js","utils/format.js","utils/services/calculation.js","components/calculator/index.js","components/calculator/Calculator.js","utils/constants.js","App.js","index.js"],"names":["Display","props","ref","useRef","useState","scale","setScale","getResult","firstOperand","secondOperand","operation","isError","useEffect","current","node","actualScale","parentNode","offsetWidth","className","style","transform","defaultProps","Button","value","onClick","e","formatOutputValue","isNaN","parseFloat","toLocaleString","useGrouping","maximumFractionDigits","formatNumer","num","String","performCalculation","errCallback","curOper","prevOper","includes","Calculator","setIsError","setFirstOperand","setSecondOperand","setOperation","handleNumButtonClick","_","second","length","handleOperationClick","slice","result","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3d848947.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport './Display.scss';\n\nexport const Display = (props) => {\n  const ref = useRef();\n  const [scale, setScale] = useState(1);\n  const { getResult, firstOperand, secondOperand, operation, isError } = props;\n\n  useEffect(() => {\n    if (ref.current) {\n      const node = ref.current;\n      const parentNode = ref.current.parentNode;\n      const availableWidth = parentNode.offsetWidth;\n      const actualWidth = node.offsetWidth;\n      const actualScale = availableWidth / actualWidth;\n\n      if (scale === actualScale) return;\n\n      if (actualScale < 1) {\n        setScale(actualScale);\n      } else if (scale < 1) {\n        setScale(1);\n      }\n    }\n  }, [firstOperand, secondOperand, operation]);\n\n  return (\n    <div className=\"display calculator-display\">\n      <p ref={ref} style={{ transform: `scale(${scale}, ${scale})` }} className=\"display-main-line\">\n        {`${firstOperand ?? ''} ${operation ?? ''} ${secondOperand ?? ''}`}\n      </p>\n      <p className=\"display-result-line\">{isError ? 'Error' : getResult() ?? firstOperand}</p>\n    </div>\n  );\n};\n\nDisplay.propTypes = {\n  firstOperand: PropTypes.string,\n  secondOperand: PropTypes.string,\n  operation: PropTypes.string,\n  isError: PropTypes.bool,\n  getResult: PropTypes.func\n};\n\nDisplay.defaultProps = {\n  getResult: () => '0',\n  isError: false,\n  firstOperand: '0',\n  secondOperand: null,\n  operation: null\n};\n","import { Display } from './Display';\n\nexport default Display;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './Button.scss';\n\nexport const Button = (props) => {\n  const { value, onClick, className } = props;\n\n  return (\n    <button\n      onClick={(e) => onClick(e, value)}\n      className={`button calclulator-button ${className ? className : ''}`}\n    >\n      {value}\n    </button>\n  );\n};\n\nButton.propTypes = {\n  value: PropTypes.string,\n  onClick: PropTypes.func,\n  className: PropTypes.oneOf(['clear', 'common', 'equal', 'operation', 'backspace'])\n};\n\nButton.defaultProps = {\n  value: '0',\n  onClick: () => ({}),\n  className: 'common'\n};\n","import { Button } from './Button';\n\nexport default Button;\n","export const formatOutputValue = (value) => {\n  return !isNaN(value)\n    ? parseFloat(value).toLocaleString('en-US', {\n        useGrouping: false,\n        maximumFractionDigits: 8\n      })\n    : null;\n};\n\nexport const formatNumer = (num) => String(parseFloat(num));\n","export const performCalculation = (firstOperand, operation, secondOperand, errCallback) => {\n  if (!firstOperand || !operation || !secondOperand) {\n    return;\n  }\n  let curOper = +firstOperand,\n    prevOper = null;\n\n  if (secondOperand.includes('%')) {\n    prevOper = (parseFloat(secondOperand) * curOper) / 100;\n  } else {\n    prevOper = +secondOperand;\n  }\n\n  switch (operation) {\n    case '+':\n      return curOper + prevOper;\n    case '-':\n      return curOper - prevOper;\n    case '*':\n      return curOper * prevOper;\n    case '/':\n      if (prevOper === 0) {\n        if (errCallback && typeof errCallback === 'function') {\n          errCallback();\n        }\n        return;\n      }\n      return curOper / prevOper;\n    default:\n      return 0;\n  }\n};\n","import { Calculator } from './Calculator';\nexport default Calculator;\n","import React, { useState } from 'react';\nimport Display from '../display';\nimport Button from '../button';\nimport { MAX_NUM_LENGTH } from '../../utils/constants';\nimport { formatOutputValue, formatNumer } from '../../utils/format';\nimport { performCalculation } from '../../utils/services/calculation';\nimport './Calculator.scss';\n\nexport const Calculator = () => {\n  const [isError, setIsError] = useState(false);\n  const [firstOperand, setFirstOperand] = useState('0');\n  const [secondOperand, setSecondOperand] = useState(null);\n  const [operation, setOperation] = useState(null);\n\n  const handleNumButtonClick = (_, num) => {\n    if (!firstOperand || !operation) {\n      firstOperand.length < MAX_NUM_LENGTH && setFirstOperand(formatNumer(firstOperand + num));\n      return;\n    }\n    if (isError) {\n      setIsError(false);\n    }\n    const second = secondOperand ?? '0';\n    if (second.length < MAX_NUM_LENGTH) {\n      setSecondOperand(formatNumer(second + num));\n    }\n  };\n\n  const handleOperationClick = (_, operation) => {\n    if (!firstOperand) {\n      return;\n    }\n    setOperation(operation);\n  };\n\n  const handleBackspaceButton = () => {\n    if (isError) {\n      setIsError(false);\n    }\n\n    if (secondOperand) {\n      setSecondOperand(secondOperand.slice(0, secondOperand.length - 1));\n      return;\n    }\n    if (operation) {\n      setOperation(null);\n      return;\n    }\n\n    if (firstOperand === '0') {\n      return;\n    }\n\n    if (firstOperand.length === 1) {\n      setFirstOperand('0');\n      return;\n    }\n\n    setFirstOperand(firstOperand.slice(0, firstOperand.length - 1));\n  };\n\n  const handleClearButton = () => {\n    setOperation(null);\n    setSecondOperand(null);\n    setFirstOperand('0');\n    setIsError(false);\n  };\n\n  const handleEqualButton = () => {\n    if (isError) {\n      return;\n    }\n    if (!secondOperand && !firstOperand && !operation) {\n      return;\n    }\n    setOperation(null);\n    setSecondOperand(null);\n\n    const result = performCalculation(firstOperand, operation, secondOperand, () => {\n      setIsError(true);\n    });\n    if (result) {\n      setFirstOperand(formatOutputValue(result));\n    }\n  };\n\n  const handleDecimalButton = () => {\n    if (!secondOperand && !firstOperand.includes('.')) {\n      setFirstOperand(firstOperand + '.');\n    } else if (secondOperand && !secondOperand.includes('.')) {\n      setSecondOperand(secondOperand + '.');\n    }\n\n    if (isError) {\n      setIsError(false);\n    }\n  };\n\n  const handlePercentButton = () => {\n    if (!secondOperand) {\n      setFirstOperand(formatNumer(firstOperand / 100));\n      setOperation(null);\n      return;\n    }\n    if (!secondOperand.includes('%')) {\n      setSecondOperand(secondOperand + '%');\n    }\n  };\n\n  return (\n    <div className=\"calculator\">\n      <Display\n        firstOperand={firstOperand}\n        secondOperand={secondOperand}\n        operation={operation}\n        getResult={() =>\n          formatOutputValue(\n            performCalculation(firstOperand, operation, secondOperand, () => {\n              setIsError(true);\n            })\n          )\n        }\n        isError={isError}\n      />\n      <div className=\"numpad\">\n        <Button value=\"AC\" className=\"clear\" onClick={handleClearButton} />\n        <Button value={null} className=\"backspace\" onClick={handleBackspaceButton} />\n        <Button value=\"%\" className=\"common\" onClick={handlePercentButton} />\n        <Button value=\"/\" className=\"operation\" onClick={handleOperationClick} />\n        <Button value=\"7\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"8\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"9\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"*\" className=\"operation\" onClick={handleOperationClick} />\n        <Button value=\"4\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"5\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"6\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"-\" className=\"operation\" onClick={handleOperationClick} />\n        <Button value=\"1\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"2\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"3\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"+\" className=\"operation\" onClick={handleOperationClick} />\n        <Button value=\".\" className=\"operation\" onClick={handleDecimalButton} />\n        <Button value=\"0\" className=\"common\" onClick={handleNumButtonClick} />\n        <Button value=\"=\" className=\"equal\" onClick={handleEqualButton} />\n      </div>\n    </div>\n  );\n};\n","export const MAX_NUM_LENGTH = 14;\n","import React from 'react';\nimport Calculator from './components/calculator';\n\nexport function App() {\n  return (\n    <div className=\"calculator-wrapper\">\n      <Calculator />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './assets/scss/main.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}